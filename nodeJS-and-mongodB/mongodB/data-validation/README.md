## Data handling with type and validation

When handling data on your server the best first line of defense is to do validation and type assertion. This way, the data sent is already sanitized to be of a certain type and you avoid sending dangerous scripts to the server. Let me demonstrate. So go into the project and open the folder called models and then click on crmModel. And this is where we actually define the type of our schema. So right now if you take a look at firstName, lastName, email, company, phone, and created_date we expect a type. So we expect a type of String, String, and email for String and then Number for phone and then we expect a type Date for the created_date. So if we pass a number to firstName, right there and then it's gonna break. So we're not gonna be able to pass a number to String or a string to the Number here. So this is one of the first thing you need to do. So when you define your schema, make sure you define a type for each of your properties inside of your object that you are passing and sending to the server. Now the second thing you could do is use further validation with a library called validator.js, so we validate the data further when you send it to the server. So not only we can expect an actual type, but what exactly we expect. So no more than a specific number of characters or for the email we expect of type email and so on and so forth. So let's go into the actual site where we have validator. So you can go to github.com/chriso/validator.js. And if you scroll down here, it's very easy to get validator up and running inside of your server. So you import validator from validator. And then inside of your data, you simply use validator.isEmail and then pass the value or pass the variable that holds the value. So in this case we'd pass, for example, email inside of this particular validation here. So if we put this into practice in our application here, it would be in the controllers. So if we click on the folder controller, and then open up crmController, then what we do is when we add new data to the server, we would sort of do an if statement or a conditional statement. If it doesn't meet this requirements, then do not pass the data to the server. Otherwise, if it meets the requirements then you can go ahead and save that new contact to the server. So it'd go something like this. So right below your new contact here, you would do something like this where you would write an if statement, something like that where if, validator.isEmail, and then pass all the new contacts so the new contact body it would have, newContact.email. So it would have an email inside of that object. So if that is not an email then, well actually in this case it would be if this is an email, then run the code below. In this case, run the code below. And then otherwise, do something of console.log something like not an email or whatever is the error message. So you get the point. So basically what we would need to do is wrap this particular saving of data inside of our server inside of an if statement and the run conditional statements to validate that whatever the data is inside is of particular type. So there is an email and so on and so forth and then you can save it. So that's how how you would actually validate further. And you can even go as far as actually validate more and put more conditionals yourself, so write your own code. So contact email needs to have that many characters and so on and so forth. So this is how you would actually run some validation before you actually save it in the controller. So you wanna make sure you have these parameters inside of your application to make sure that whatever you're sending to your database is something that is safe, is not going to be injecting malicious code and so on and so forth. So let's save this and move on.
