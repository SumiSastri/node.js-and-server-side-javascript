- Transcript: Express has a few built-in middleware we can use to do specific things. In fact, we already used one of them in our code, the express.static, which allows us to use static files in our web server. Let's explore two other methods available to us with Express. The next one is express.json, which allows us to parse JSON POST commands. So what does that mean? It means that when a form or the front end wants to send new data to our server and database, and send it in JSON, we need our server to be able to use it in this format and then post it to the database. That's what it does. It's Express' own version of body-parser, if you ever used it. Let me quickly show you an example. So the first thing I want to show you is the examples of JSON data versus URL encoded, which we're going to use both in this video. So let me just quickly do a comment here, so I'll go to index.js and feel free to copy what I'm commenting here so it gives you some documentation for yourself. So, this is JSON data and you may have seen it a couple of times already. So it looks something like this, it's basically an object, so it could be like "hello," and then you have, "JSON is cool." So that's JSON data, so when we send from a form in JSON format, we need to use the right middleware to be able to ingest it and stringify it to send it to the database. So, when we want to use URL encoded data, and let me just type that here. Encoded data. It looks something like this, and you may have seen this in URLs. So, you have the full path of your endpoint and then at the end of it you have something that looks like this. Hello and then URLEncoded and then plus is plus cool. So this is pretty much the same as if we were passing a property of hello, like we're doing in the JSON data, and then we're passing the actual string like so: URLEncoded is cool, so basically the same thing that we're doing here with JSON is cool. So this is what are the types of data that we're going to use, and basically we're going to use Postman to post these types of data directly to our endpoints. So let's go ahead and code what we will need to make that work. So the first thing we need is to use one of the methods available to us from Express, and we'll do this, let's do this on line eight right after that. And double return and then let's do app.use, we're using express, and the method json, like so. So this is basically allowing us to use JSON in our data, so let's put a note so this is the method to use JSON. Perfect, so now let's create the POST and the URL route that we need to do our POST. So let's go ahead and do that, so, app.post, and this is going to be a newItem endpoint which takes a request, response argument, and then we'll do a function, and then what we'll do, we'll simply console.log it so we can see that what we have is available to us. And then let's do a response to the front end with what's in the request body. OK, so we'll do a semicolon on line 29, and we are good to go. Alright, so let's save this, let's make sure our server is running, so let's click on View, Integrated Terminal, and it is running, and let's do an RS to restart just to be sure. Everything is good, alright, so let's test this in Postman now, so let's go back to Postman, and for this one to work, we need to change a few things in our Postman information, so let's bring up Postman and let's make sure that we select POST first and select newItem like so, so this is the right path. And then we'll change a few things, so first, in the headers, we're going to change the Content-Type here, and change it to application/json, and then in the Body, instead of doing form-data, we're going to actually do raw, and we're going to be creating an object so this is basically JSON, so let's create an object and in this object we'll do "hello": "JSON is cool" So let's go ahead and send this and we should see a response, and the response is quite... It's not really high enough so we can see it, let's go send, and we get a good response, so we're all good, so if we go back to our server on VS Code, we see that the response has been passed here. So this is JSON, so we're actually passing down JSON data from our client, which is Postman, to our server. Now let's do URLEncoded this time. So let's go back to VS Code, let's go in the index.js, on line, wait a minute, there we go. So comment line 11, return, and then let's do app.use. Again, we're using the Express API with the method urlencoded, like so. And if you don't want to have an error, so everything is going to work if we leave it like that, so we want to be explicit about certain options on this particular method here. You want to make sure that you are mentioning extended: true or not, and this particular option basically tells you which stringify version you want to do, the QS version or the QS stringify, can't remember exactly the other one, but I'm using the QS one. So basically this is taking the data that will come in from our client and then stringify it ready for our server, so we need to pass that option in here, otherwise, it's going to work, but you're going to get a warning to be explicit about which stringify version you want to use, otherwise it's going to use the default that we're actually asking for here, but it's going to give you a warning, so I want to avoid having warnings for no apparent reason like that, so let's go ahead and do that. And then, the next thing that we need to do is basically test this, so let's save it. That's the only thing you need to do, so basically your POST command is not going to change because we're still passing data here, but the type of data that we're passing to the POST command is what's going to change and what the server is ready to accept. So, let's go ahead and save that, let's go back to Postman and let's make sure there's no errors here so everything is good, we're good, let's go back to our Postman. And now we need to change again, a few options. So let's go back to our Headers, and instead of application.json, we need to change this to application, and then scroll, I think it's the very last one on that list, application... Let's continue, application, and it's the very last one just to annoy me. It's this one, so triple W form URL encoded, so this is the content type you're passing, and then in the Body, you want to change this to this one here, so the second one, form-urlencoded, like so, and now as opposed to pass raw data, you're actually going to pass a key and its value. So in this case, we'll pass hello, again, and pass urlencoded is cool. Not "cood," "cool," like so. Let's send this. And the response is the same, which means it's been successful, let's go back to our VS Code and our server, and we've still got the same thing here, so we are good to go. So this is a good overview of the Express middleware available to us. And feel free to explore its options in detail, so let's move on.
