- Transcript: What is middleware? In the context of our Node and Express server, how would it be used? Middleware are simply functions that have access to the request and response object in our Express application and can run their code there. It can make changes to the request and response objects, can end them, can call another function in the stack using next, a function we've already used. In a way, we've been creating our own application middleware which basically means we add our own code to do anything before we send a response back. But let's push further and do some more. We'll do an example that routes with middleware in one of the endpoints. So let's get to it. So get back to index.js, and the first thing I want you to do is click on line 22 here and just return. So let's leave some space here. So basically everything, and I'm going to add a note here so you can basically understand what's happening here. So everything above is middleware. So all the code that we are doing just before we actually send response back, this is all middleware. So what we are going to do is add some more. So first, so this is the first block where we're actually pulling stuff out of the data that we have in our JSON data. So let's go ahead and just note that in there. So this is the middleware that pulls the data, and then let's add some more here. We'll add, basically, middleware that uses the request object. So, again, let me just make that very clear. Middleware is basically functions that are happening before we actually are sending the response back, so it could be anything. So during that stage in the flow of our application, or the flow of this function here, we are able to use the response and the request object as long as we want. So in this case, let's do something like a console.log. So basically, we are able to access what the original URL of the request is from and we could actually console.log that. So let's do that. And open and close curly braces, and by using the request object, we can get the original URL like so. And then, console.log it. Let's do another one. So let's do a console.log, and let's do exactly the same thing here. So copy this block of code here on 25 and then paste it on 26. And then, what is the request type? And what we could do is basically use the request object and call in what is the method that is called. So basically, method of the request is get. So once we actually are console logging, we're going to see something like, this is a get method. So this is also middleware. So let's save that. And go inside of our application here, so let's go back here. And what we are going to do is do an item/ and just call any item. So let's go at 25 for this one. So we get this information here, but all the middleware stuff is happening on the servers. Now that we've requested item 25, let's go back to the server, and open up our terminals. So click on View, Integrated Terminal. And then you'll see a request from item 25. So the original URL is basically what the request was from, so localhost 3000/item/25. The request type is a GET, and so on, so forth. So as you can see, we could add anything we want as middleware in our endpoints. It could also be a third party library where you want to do something special, so your imagination is your limit. So go to this particular page, so go to your browser, and go to expressjs.com/en, for English, /guide/using-middleware.html. In this section, you're going to have a lot of information about middleware, so what type of middleware that you have access to, what are some of the examples of code. And we are going to go through some of that in the next few videos, but I wanted to give you that access here so you can kind of browse through it and understand or pre-understand what we're going to do in the next few videos, and take a look at some of the stuff in here. Okay, so now scroll to the routing middleware. So if you don't know where that is, you can go to router-level middleware, like so. So routing-level middleware versus application is very much the same. The only difference that routing level middleware is wrapped inside express.Router, and the only reason you would use one over another is if you want to clear up code from the application middleware like we've done in our code, and do it in a routing level for modularity reasons. So no differences between the two. So okay, let's move on.
